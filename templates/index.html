<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link href="static/stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="static/stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="static/javascripts/all.js" type="text/javascript"></script>

  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="static/images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="static/images/logo.png" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the MetaDisk API! Storj allows users to buy and sell their extra hard drive space into a global network. Storj uses a variety of technology including P2P networks, encryption, cryptographic auditing, and the Bitcoin blockchain to keep this network secure, private, and robust. These technologies make Storj a solid, but complex platform.</p>

<p>MetaDisk will simplify that significantly by providing a simple API, service, and toolset to allow developers to PUT and GET data from the Storj platform. It also allows developers to pay via dollars, and not have to deal with the complexity of Bitcoin or other cryptocurrencies.</p>

<h1 id="metadisk-rules">MetaDisk Rules</h1>

<ol>
<li>MetaDisk is a zero knowledge system. No plaintext data, no keys, or file metadata should ever stored or held by the service.</li>
<li>MetaDisk is a transparent service, not a black box like traditional data storage services. File network status, node status, and independent audits of files should be able to be done at all times.</li>
</ol>

<h1 id="file-upload">File Upload</h1>

<blockquote>
<p>To upload file, use this code:</p>
</blockquote>
<pre class="highlight shell"><code>    curl
        -F<span class="s2">"data_hash=3b438fd7b1f223890f18f8ffc50c19c00b08340fc4fc76a94ba3a1c160b332a0"</span> <span class="se">\</span>
        -F<span class="s2">"file_role=3"</span> -F<span class="s2">"file_data=@file_name"</span> <span class="se">\</span>
        /api/files/
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"data_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3b438fd7b1f223890f18f8ffc50c19c00b08340fc4fc76a94ba3a1c160b332a0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"file_role"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>User can upload data via POST to an end node.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /api/files</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Type</th>
<th>Params</th>
<th>Values</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>POST</td>
<td>data_hash</td>
<td>string</td>
<td>data_hash must be sent with each request. It ensures that the data passed to the endpoint has not been modified in transit. data_hash should be the SHA-256 hash of file_data</td>
</tr>
<tr>
<td>POST</td>
<td>file_role</td>
<td>integer</td>
<td>The uploading party needs to be able to set file roles. For example, if anyone can retrieve this file or only specified addresses. file_role have not been defined yet, so we just store whatever is passed and move on.</td>
</tr>
<tr>
<td>POST</td>
<td>file_data</td>
<td>binary file</td>
<td>Encrypted shard of the data. To ensure properly handling under the current specifications file_data should not be larger than 128 MB</td>
</tr>
</tbody></table>

<h1 id="file-download">File Download</h1>

<p>User can download data via GET from an end node.</p>

<blockquote>
<p>To download data, use this code:</p>
</blockquote>
<pre class="highlight shell"><code>curl
    -X GET -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    /api/files/3b438fd7b1f223890f18f8ffc50c19c00b08340fc4fc76a94ba3a1c160b332a0
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:
<code class="prettyprint">binary data
....binary data goes here...
</code></p>
</blockquote>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /api/files/&lt;data_hash&gt;</code></p>

<h1 id="node-info">Node Info</h1>

<p>A quick glance at the nodes data usage.</p>
<pre class="highlight shell"><code>curl
    -X GET -H <span class="s2">"Content-type: application/json"</span> -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    /api/nodes/me/
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"bandwidth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"current"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"incoming"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
      </span><span class="nt">"outgoing"</span><span class="p">:</span><span class="w"> </span><span class="mi">47</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"incoming"</span><span class="p">:</span><span class="w"> </span><span class="mi">1048576</span><span class="p">,</span><span class="w">
      </span><span class="nt">"outgoing"</span><span class="p">:</span><span class="w"> </span><span class="mi">2097152</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"incoming"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
      </span><span class="nt">"outgoing"</span><span class="p">:</span><span class="w"> </span><span class="mi">47</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"storage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"capacity"</span><span class="p">:</span><span class="w"> </span><span class="mi">104857600</span><span class="p">,</span><span class="w">
    </span><span class="nt">"max_file_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
    </span><span class="nt">"used"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /api/nodes/me</code></p>

<h1 id="file-list">File List</h1>

<p>Get all files currently listed on the node.</p>
<pre class="highlight shell"><code>curl
    -X GET -H <span class="s2">"Content-type: application/json"</span> -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    /api/files/
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="s2">"3b438fd7b1f223890f18f8ffc50c19c00b08340fc4fc76a94ba3a1c160b332a0"</span><span class="p">]</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET /api/files/</code></p>

          <h1 id="errors">Errors</h1>

<aside class="notice">The MetaDisk API uses the following error codes:</aside>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>101</td>
<td>Invalid SHA-256 hash</td>
</tr>
<tr>
<td>102</td>
<td>Data hash doesn&rsquo;t match file data</td>
</tr>
<tr>
<td>103</td>
<td>File data is larger than 128MB</td>
</tr>
<tr>
<td>201</td>
<td>Node has a full disk</td>
</tr>
<tr>
<td>202</td>
<td>Node has reached bandwidth limit</td>
</tr>
<tr>
<td>301</td>
<td>Particular hash not found</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
